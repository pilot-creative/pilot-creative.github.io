const
    cardsData = [
        {
            images: {
                thumb: 'fallout',
                credit: 'gamestop',
            },
            headline: {
                title: 'FALLOUT: NEW VEGAS',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'pilot23',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'HOME PAGE DESIGN',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'pilot20',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'SMART TV DESIGNS',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'ignifit',
                credit: 'design',
            },
            headline: {
                title: 'IGNIFIT: TRACKER',
                subtitle: 'IGNIFIT'
            }
        },
        {
            images: {
                thumb: 'ignifit2',
                credit: 'design',
            },
            headline: {
                title: 'IGNIFIT: TRACKER',
                subtitle: 'IGNIFIT'
            }
        },
        {
            images: {
                thumb: 'ignifit3',
                credit: 'design',
            },
            headline: {
                title: 'IGNIFIT: TRACKER',
                subtitle: 'IGNIFIT'
            }
        },,
        {
            images: {
                thumb: 'proplayer',
                credit: 'design',
            },
            headline: {
                title: 'GAME TOURNAMENT',
                subtitle: 'PRO PLAYER'
            }
        },
        {
            images: {
                thumb: 'pilot11',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'HOME PAGE DESIGN',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'pilot18',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'MOBILE DESIGN',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'pilot19',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'HOME PAGE DESIGN',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'warcraft',
                credit: 'gamestop',
            },
            headline: {
                title: 'POWERUP REWARDS',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'pilot22',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'HEADER DESIGN',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'interfax',
                credit: 'design',
            },
            headline: {
                title: 'INTERFAX: FAX API',
                subtitle: 'INTERFAX'
            }
        },
        {
            images: {
                thumb: 'onlinemapfinder',
                credit: 'design',
            },
            headline: {
                title: 'ONLINE MAP FINDER',
                subtitle: 'MY WAY'
            }
        },
        {
            images: {
                thumb: 'pilot',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'HOME PAGE DESIGN',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'thinksmart',
                credit: 'design',
            },
            headline: {
                title: 'FACEBOOK BANNER',
                subtitle: 'THINKSMART'
            }
        },
        {
            images: {
                thumb: 'digitaldocs',
                credit: 'design',
            },
            headline: {
                title: 'FINANCIAL AID',
                subtitle: 'DIGITAL DOCS'
            }
        },
        {
            images: {
                thumb: 'pilot4',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'HTML5 HERO DESIGN',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'pilot21',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'HOME PAGE DESIGN',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'pilot3',
                credit: 'design',
            },
            headline: {
                title: 'TABLE DATA',
                subtitle: 'PET SHOP'
            }
        },
        {
            images: {
                thumb: 'dsixl',
                credit: 'gamestop',
            },
            headline: {
                title: 'NINTENDO DSiXL',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'annalise',
                credit: 'design',
            },
            headline: {
                title: 'ANNALISE JEWELLERY',
                subtitle: 'ANNALISE'
            }
        },
        {
            images: {
                thumb: 'pilot15',
                credit: 'design',
            },
            headline: {
                title: 'HOME PAGE DESIGN',
                subtitle: 'RANDOM'
            }
        },
        {
            images: {
                thumb: 'pilot6',
                credit: 'design',
            },
            headline: {
                title: 'INTERFAX: FEATURES',
                subtitle: 'INTERFAX'
            }
        },
        {
            images: {
                thumb: 'hippiesgarage',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'HIPPIES GARAGE',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'pilotblasting',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'PILOT BLASTING LOGO',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'pilotblasting2',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'PILOT BLASTING MOBILE',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'pilotblasting3',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'PILOT BLASTING MOBILE',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'pilotblasting4',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'PILOT BLASTING MOBILE',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'pilotblasting5',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'PILOT BLASTING PAGE',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'prvolt',
                credit: 'design',
            },
            headline: {
                title: 'PRVOLT HOME PAGE',
                subtitle: 'PR VOLT'
            }
        },
        {
            images: {
                thumb: 'pilot10',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'HOME PAGE DESIGN',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'pilot7',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'HOME PAGE DESIGN',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'picnet',
                credit: 'design',
            },
            headline: {
                title: 'PICNET: HOME PAGE',
                subtitle: 'PICNET'
            }
        },
        {
            images: {
                thumb: 'assassinscreed',
                credit: 'gamestop',
            },
            headline: {
                title: "ASSASSIN'S CREED",
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'citygide',
                credit: 'design',
            },
            headline: {
                title: 'CITYGIDE PAGE',
                subtitle: 'CITYGIDE'
            }
        },
        {
            images: {
                thumb: 'pilot12',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'HOME PAGE DESIGN',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'batman',
                credit: 'gamestop',
            },
            headline: {
                title: 'BATMAN FLASH',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'batman2',
                credit: 'gamestop',
            },
            headline: {
                title: 'BATMAN FLASH',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'halo',
                credit: 'gamestop',
            },
            headline: {
                title: 'HALO: MELEE',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'portal2',
                credit: 'gamestop',
            },
            headline: {
                title: 'PORTAL 2',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'pilot8',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'HOME PAGE DESIGN',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'finalfantasy',
                credit: 'gamestop',
            },
            headline: {
                title: 'FINAL FANTASY XIII',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'finalfantasy2',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'FINAL FANTASY XIII',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'finalfantasy3',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'FINAL FANTASY XIII',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'hiresource',
                credit: 'design',
            },
            headline: {
                title: 'BUSINESS CARD',
                subtitle: 'HIRE SOURCE'
            }
        },
        {
            images: {
                thumb: 'dickies',
                credit: 'design',
            },
            headline: {
                title: 'DICKIES DESIGN',
                subtitle: 'DICKIES'
            }
        },
        {
            images: {
                thumb: 'hays',
                credit: 'design',
            },
            headline: {
                title: 'HEATHER HAYS',
                subtitle: 'HAYS'
            }
        },
        {
            images: {
                thumb: 'gousmilitary',
                credit: 'design',
            },
            headline: {
                title: 'GO US MILITARY',
                subtitle: 'US MILITARY'
            }
        },
        {
            images: {
                thumb: 'bejeweled',
                credit: 'gamestop',
            },
            headline: {
                title: 'BEJEWELED 3',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'expander',
                credit: 'design',
            },
            headline: {
                title: 'PRACTICE EXPANDER',
                subtitle: 'EXPANDER'
            }
        },
        {
            images: {
                thumb: 'callofduty',
                credit: 'gamestop',
            },
            headline: {
                title: 'CALL OF DUTY',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'callofduty2',
                credit: 'gamestop',
            },
            headline: {
                title: 'CALL OF DUTY',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'callofduty3',
                credit: 'gamestop',
            },
            headline: {
                title: 'CALL OF DUTY',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'nationwide',
                credit: 'design',
            },
            headline: {
                title: 'TRANSPORT SERVICES',
                subtitle: 'NATIONWIDE'
            }
        },
        {
            images: {
                thumb: 'nationwide2',
                credit: 'design',
            },
            headline: {
                title: 'TRANSPORT SERVICES',
                subtitle: 'NATIONWIDE'
            }
        },
        {
            images: {
                thumb: 'zanberry',
                credit: 'design',
            },
            headline: {
                title: 'ZAN BERRY PHOTO',
                subtitle: 'ZAN BERRY'
            }
        },
        {
            images: {
                thumb: 'armstrong',
                credit: 'design',
            },
            headline: {
                title: 'ASHLEY ARMSTRONG',
                subtitle: 'ARMSTRONG'
            }
        },
        {
            images: {
                thumb: 'ironman',
                credit: 'gamestop',
            },
            headline: {
                title: 'IRON MAN 2',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'starcraft',
                credit: 'gamestop',
            },
            headline: {
                title: 'STAR CRAFT II',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'burrells',
                credit: 'design',
            },
            headline: {
                title: 'AUTO SALES',
                subtitle: 'BURRELLS'
            }
        },
        {
            images: {
                thumb: 'justdance2',
                credit: 'gamestop',
            },
            headline: {
                title: 'JUST DANCE 2',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'kinect',
                credit: 'gamestop',
            },
            headline: {
                title: 'XBOX 360 KINECT',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'move',
                credit: 'gamestop',
            },
            headline: {
                title: 'PLAYSTATION MOVE',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'natal',
                credit: 'gamestop',
            },
            headline: {
                title: 'PROJECT NATAL',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'pilot9',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'HERO PAGE DESIGN',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'core',
                credit: 'design',
            },
            headline: {
                title: 'CORE EXPLORATION',
                subtitle: 'CORE'
            }
        },
        {
            images: {
                thumb: 'pilot17',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'MOBILE DESIGN',
                subtitle: 'PILOT CREATIVE'
            }
        },
        {
            images: {
                thumb: 'deadrising2',
                credit: 'gamestop',
            },
            headline: {
                title: 'DEAD RISING 2',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'alphaprotocol',
                credit: 'gamestop',
            },
            headline: {
                title: 'ALPHA PROTOCOL',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'metroid',
                credit: 'gamestop',
            },
            headline: {
                title: 'METROID: OTHER M',
                subtitle: 'GAMESTOP'
            }
        },
        {
            images: {
                thumb: 'pilot14',
                credit: 'pilotcreative',
            },
            headline: {
                title: 'HOME PAGE DESIGN',
                subtitle: 'PILOT CREATIVE'
            }
        }
    ],
    overlay = document.querySelector('#overlay'),
    flyout = document.querySelector('#flyout'),
    menu = document.querySelector('#menu'),
    cards = document.querySelector('#cards'),
    query395_590 = matchMedia('(min-width: 395px) and (max-width: 589px)'),
    query740_860 = matchMedia('(min-width: 740px) and (max-width: 859px)');

function viewDesign() {
    overlay.style.display = 'flex';
    overlay.firstElementChild.src = this.querySelector('img').src.replace('thumbs', 'designs');
}

menu.addEventListener('click', function () {
    flyout.getAttribute('open') === 'false' ? flyout.setAttribute('open', true) : flyout.setAttribute('open', false);
});

overlay.addEventListener('click', function () {
    this.style.display = 'none';
});

cardsData.forEach(cardData => {
    const
        card = document.createElement('div'),
        thumb = document.createElement('picture'),
        credit = document.createElement('img'),
        headline = document.createElement('div'),
        title = document.createElement('p'),
        subtitle = document.createElement('p'),
        view = document.createElement('button'),
        thumblink = document.createElement('link'),
        designlink = document.createElement('link');

    thumblink.rel = 'prefetch';
    thumblink.as = 'image';
    thumblink.type = `image/webp`;
    thumblink.href = `/assets/imgs/thumbs/${cardData.images.thumb}.webp`;
    document.head.appendChild(thumblink);

    designlink.rel = 'prefetch';
    designlink.as = 'image';
    designlink.type = `image/webp`;
    designlink.href = `/assets/imgs/designs/${cardData.images.thumb}.webp`;
    document.head.appendChild(designlink);

    thumb.className = 'thumb';
    thumb.innerHTML = `
        <img loading="eager" decoding="async" fetchpriority="low" src='/assets/imgs/thumbs/${cardData.images.thumb}.webp' alt='${cardData.headline.title}' title='${cardData.headline.title}'>
    `;

    credit.className = 'credit';
    credit.src = `/assets/imgs/credits/${cardData.images.credit}.svg`;

    title.className = 'title';
    title.innerText = cardData.headline.title;

    subtitle.className = 'subtitle';
    subtitle.innerText = `DESIGN FOR ${cardData.headline.subtitle}`;

    headline.className = 'headline';
    headline.appendChild(title);
    headline.appendChild(subtitle);

    view.textContent = 'VIEW DESIGN';
    view.addEventListener('click', viewDesign.bind(thumb));

    query395_590.matches ||
        query740_860.matches ?
        card.className = 'row card' :
        card.className = 'card';

    card.appendChild(thumb);
    card.appendChild(credit);
    card.appendChild(headline);
    card.appendChild(view);

    cards.appendChild(card);
});

const cardElements = document.querySelectorAll('div[class*="card"]');

query395_590.onchange = function ({ target }) {
    if (target.matches) {
        cardElements.forEach(card => {
            card.className = 'row card';
        });
    } else {
        cardElements.forEach(card => {
            card.className = 'card';
        });
    }
};

query740_860.onchange = function ({ target }) {
    if (target.matches) {
        cardElements.forEach(card => {
            card.className = 'row card';
        });
    } else {
        cardElements.forEach(card => {
            card.className = 'card';
        });
    }
};